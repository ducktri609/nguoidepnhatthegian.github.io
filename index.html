<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Ng∆∞·ªùi ƒë·∫πp nh·∫•t th·∫ø gian üíå</title>

<style>
/* ================= HEART ================= */
.heart {
    z-index: 3;
    position: absolute;
    pointer-events: none;
    animation: heartFloat linear forwards;
}

@keyframes heartFloat {
    0% {
        transform: translate(0, 0) scale(1) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translate(var(--x), var(--y)) scale(1.6) rotate(360deg);
        opacity: 0;
    }
}

/* ================= BODY ================= */
body {
    margin: 0;
    height: 100vh;
    background: pink;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', sans-serif;
    overflow: hidden;
}

/* ================= LOCK ================= */
.lock-container {
    position: absolute;
    z-index: 5;
    text-align: center;
    transition: transform 1s ease-in;
}

.lock {
    font-size: 100px;
    margin-bottom: 50px;
}

.display {
    height: 30px;
    margin-bottom: 10px;
    font-size: 20px;
    letter-spacing: 5px;
}

.keypad {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    gap: 10px;
    justify-content: center;
}

.keypad button {
    height: 100px;
    border-radius: 10px;
    border: none;
    font-size: 50px;
    background: #ff6f91;
    color: white;
    cursor: pointer;
}

.keypad button:hover {
    background: #ff3f6c;
}

.delete {
    background: #ff4444;
}

.wide {
    grid-column: span 3;
    background: #0066ff;
}

.lock-container.fall {
    transform: translateY(120vh) rotate(20deg);
}

/* ================= SCENE ================= */
.scene {
    position: relative;
    width: 300px;
    height: 300px;
    opacity: 0;
    pointer-events: none;
    transition: 1s;
}

.scene.show {
    opacity: 1;
    pointer-events: auto;
}

/* ================= ENVELOPE ================= */
.envelope {
    position: absolute;
    top: 0;
    width: 300px;
    height: 200px;
    background: #ff6f91;
    cursor: pointer;
    z-index: 2;
    transform: scale(1.5);
}

.envelope::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
    border-left: 150px solid transparent;
    border-right: 150px solid transparent;
    border-top: 100px solid #ff3f6c;
    transform-origin: top;
    transition: 0.5s;
}

.envelope.open::before {
    transform: rotateX(180deg);
}

.envelope.fall {
    animation: fallDown 1s forwards;
}

@keyframes fallDown {
    to {
        transform: translateY(500px);
        opacity: 0;
    }
}

/* ================= LETTER ================= */
.letter {
    position: absolute;
    top: 20px;
    left: 10px;
    width: 280px;
    height: 180px;
    background: white;
    opacity: 0;
    transition: 0.5s;
    z-index: 1;
    display: flex;
    justify-content: center;
    align-items: center;
}

.letter.show {
    opacity: 1;
}

.letter img {
    max-width: 100%;
    border-radius: 8px;
    opacity: 0.5;
    transform: scale(1);
    transition: 3s;
}

.letter.show img {
    opacity: 1;
    transform: scale(3);
}
</style>
</head>

<body>

<!-- üîê LOCK -->
<div class="lock-container" id="lock">
    <div class="lock" id="lockIcon">üîí</div>
    <div class="display" id="display"></div>

    <div class="keypad">
        <button onclick="press('1')">1</button>
        <button onclick="press('2')">2</button>
        <button onclick="press('3')">3</button>
        <button onclick="press('4')">4</button>
        <button onclick="press('5')">5</button>
        <button onclick="press('6')">6</button>
        <button onclick="press('7')">7</button>
        <button onclick="press('8')">8</button>
        <button onclick="press('9')">9</button>
        <button onclick="press('0')">0</button>
        <button class="delete" onclick="del()">X√≥a</button>
        <button class="wide" onclick="enterCode()">Nh·∫≠p</button>
    </div>
</div>

<!-- üíå SCENE -->
<div class="scene" id="scene">
    <div class="envelope" id="envelope"></div>
    <div class="letter" id="letter">
        <img src="letter.jpg">
    </div>
</div>

<script>
/* ===== LOCK LOGIC ===== */
let input = "";
const correct = "2601";

function press(n) {
    if (input.length < 4) {
        input += n;
        display.textContent = "‚Ä¢".repeat(input.length);
    }
}

function del() {
    input = input.slice(0, -1);
    display.textContent = "‚Ä¢".repeat(input.length);
}

function enterCode() {
    if (input === correct) {
        lockIcon.textContent = "üîì";
        lock.classList.add("fall");
        scene.classList.add("show");
    } else {
        input = "";
        display.textContent = "";
        alert("Sai m√£ r·ªìi üòù");
    }
}

/* ===== HEART + ENVELOPE LOGIC ===== */
function createRandomHearts(count = 12) {
    for (let i = 0; i < count; i++) {
        const heart = document.createElement('span');
        heart.className = 'heart';
        heart.textContent = '‚ù§Ô∏è';
        heart.style.left = Math.random() * 300 + 'px';
        heart.style.top = '150px';
        heart.style.setProperty('--x', (Math.random() * 400 - 200) + 'px');
        heart.style.setProperty('--y', -(Math.random() * 500 + 500) + 'px');
        heart.style.fontSize = (Math.random() * 20 + 30) + 'px';
        heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
        scene.appendChild(heart);
        setTimeout(() => heart.remove(), 4000);
    }
}

let clickCount = 0;
envelope.addEventListener('click', () => {
    clickCount++;
    if (clickCount === 1) envelope.classList.add('open');
    if (clickCount === 2) {
        envelope.classList.add('fall');
        letter.classList.add('show');
        createRandomHearts(20);
    }
});
</script>

</body>
</html>

